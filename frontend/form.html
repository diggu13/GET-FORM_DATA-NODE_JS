<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            margin: 0;
            padding: 0;
        }
        form{
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: auto 0;
        }
    </style>
</head>
<body>
    <form action="http://localhost:3000/" method="POST">
        <label for="fname">First name:</label><br>
        <input type="text" id="fname" name="fname" value=""><br>
        <label for="lname">Last name:</label><br>
        <input type="text" id="lname" name="lname" value=""><br>
        <label for="Age">Age</label><br>
        <input type="text" id="age" name="age" value=""><br>
        <label for="email">E-Mail:</label><br>
        <input type="email" id="email" name="email" value=""><br>
        <input type="file" id="file" name="file" required accept=".jpg,.png"/><br>
        <input class="submit" type="submit" value="Submit">
    </form>
    <script>
        const submit = document.querySelector('.submit');
        const fname = document.querySelector('#fname');
        const lname = document.querySelector('#lname');
        const email = document.querySelector('#email');
        const age = document.querySelector('#age')


        submit.addEventListener('click', async function(e){
            e.preventDefault();
            let fd = new FormData
            if(fname.value ==='' && lname.value==='' && email.value === ''){
                alert('add inputs')
            }else{
                fd.append('file',file.files[0])
                fd.append('first_name', fname.value)
                fd.append('last_name',lname.value)
                fd.append('Age',age.value)
                fd.append('email',email.value)
            }
            let json = await fd;
            let url = "http://localhost:3000/";
            let h = new Headers();
            h.append('Content-type','application/json')
            let req = new Request(url,{
                header: h,
                body : json,
                method: 'POST'
            })
            fetch(req)
            .then((res)=> res.json())
            .then((data)=>{
                console.log(data)
            })
            .catch(console.warn)
        })

    </script>
</body>
</html>